// ===== ДАННЫЕ ПО ВСЕМ 12 ЭКСКУРСИЯМ =====
const toursData = [
  {
    title: "Ворота Кенигсберга",
    images: Array(11).fill().map((_, i) => `image/vorota${i+1}.jpg`),
    description: `Наша автопешеходная экскурсия по Кенигсбергу-Калининграду будет с необычным акцентом: предлагаю вам обратить внимание на шедевры фортификационного направления в городской архитектуре - живописные ворота, возведенные в конце XIX века, как часть Второго вального оборонительного обвода, опоясывающего город кольцом. Кроме ворот, он включает башни, бастионы, редуты и оборонительную казарму «Кронпринц». 

В ходе обзорной экскурсии по Калининграду увидим:
- Бранденбургские ворота
- Закхаймские ворота
- Королевские ворота
- Росгартенские ворота
- Фридрихсбургские ворота

Ворота Кенигсберга, дошедшие до наших дней, возведены в XIX веке, архитектор — генерал-лейтенант инженерных войск Эрнст Людвиг фон Астер. Английская неоготика - основное направление, в котором работал фортификатор и архитектор Э. Л. Астер. Благодаря знаниям и художественно-эстетическому вкусу автора ворота Кенигсберга стали настоящей “визитной карточкой” балтийского центра. Кирпич, обожженный три раза, придавал воротам наивысшую прочность, гарантировал долговечность и презентабельный внешний вид. 

Помимо ворот, маршрут включает:
- башню «Дона» (Музей янтаря)
- крепость Фридрихсбург
- Музей марципана
- прогулку по острову Канта
- Кафедральный собор
- форты № 5 или 11 (по желанию)`,
    price: "от 8000 ₽ (4 часа)"
  },
  {
    title: "Обзорная экскурсия",
    images: Array(20).fill().map((_, i) => `image/obzornaya${i+1}.jpg`),
    description: `Предлагаю начать наше знакомство с Калининградом с увлекательной обзорной экскурсии. Она откроет перед вами богатую и многослойную историю города, познакомит с его уникальной архитектурой и главными достопримечательностями.
        
        Мы пройдемся по историческому центру, заглянем на остров Канта, где возвышается Кафедральный собор — архитектурная жемчужина с самым большим органом в России. Обязательно посетим живописную Рыбную деревню — любимое место гостей города с уютными кафе, ресторанами, гостиницами и сувенирными лавками.
        
        Я также покажу вам знаменитое оборонительное кольцо Кёнигсберга XIX века, расскажу о его военной истории и тайнах. Не обойдем стороной и современный центр города — Площадь Победы с её динамичной атмосферой.
        
        В завершение экскурсии мы отправимся в самые колоритные и атмосферные районы Калининграда — Амалиенау и Марауненхоф. Здесь, среди тенистых аллей и старинных особняков, вы почувствуете дух старой Европы.
        
        Экскурсия комбинированная — часть маршрута проходит пешком, часть на автомобиле, продолжительность около 4 часов. По пути — приятные остановки: музей марципана, сказочный Домик хомлинов и необычный музей открыток, откуда можно отправить послание родным прямо из сердца Калининграда.
        
        По вашему желанию маршрут можно дополнить посещением одного из старинных фортов, прогулкой на катере или концертом органной музыки в Кафедральном соборе.`,
  
    price: "от 8000 ₽ (4 часа)"
  },
  {
    title: "Балтийск и Балтийская коса",
    images: Array(22).fill().map((_, i) => `image/baltiysk${i+1}.jpg`),
    description: `Шведская крепость «Пиллау», руины древнего замка, фотогеничный старый маяк и «дикие» пляжи Балтийской косы — это (и не только) вы увидите вместе с профессиональным гидом во время нашей экскурсии.

Путешествие в Балтийск отличает неповторимый немецкий колорит, ведь эта древняя земля долгое время находилась под германским владычеством.

Первый пункт нашего тура — самый западный российский город — Балтийск. До 1946 года он назывался Пиллау. «Немецкий акцент» довольно ярко звучит в его многовековой истории, архитектурном убранстве и культурном наследии.

Балтийск — крупный морской порт, паромный терминал и железнодорожный вокзал. А еще здесь находится военно-морская база Балтийского флота.
Природная «изюминка» здешних мест — это песчаная коса, на пляжах которой так приятно понежиться в теплый денек! Но не забудем и о насыщенной туристической программе: посетим музей «Старый люнет», Западный форт, заброшенный аэродром и остатки немецких зенитных батарей.

Город Балтийск (3 часа) 

Покажу вам главные достопримечательности города: шведскую крепость «Пиллау», старый маяк, Морской собор, памятники Петру Великому и Елизавете Петровне и т.д

Балтийская коса (2-3 часа) 

Увидим прекрасные песчаные пляжи, а также посетим музей «Старый люнет», Западный форт, заброшенный аэродром «Нойтиф» и Южный мол.

Дополнительные расходы:
вход в крепость «Пиллау» - 300₽
проезд на пароме - 70₽
вход в музей «Старый люнет» - 100₽`,
    price: "от 12000 ₽ (8 часов)"
  },
  {
    title: "На край области (Советск – Неман – Славск)",
    images: Array(9).fill().map((_, i) => `image/north${i+1}.jpg`),
    description: `Увлекательная поездка  начнется с посещения замка Рагнит ХIII в. и частной сыроварни.
Узнав всё о строениях времен Тевтонского ордена, о сыроварении и прогулявшись по небольшому городу Неман, мы направимся дальше.

Самый северный город области — Советск, ранее носивший имя Тильзит, находится на границе с Литвой и соединен с ней мостом Королевы Луизы (основной достопримечательностью города). Несмотря на то что город был сильно разрушен во время Великой Отечественной войны, прогуливаясь по его уютным улочкам, можно окунуться в наполеоновские времена, полюбоваться интересной архитектурой начала ХХ века или поностальгировать о советском прошлом.

Также можно добавить посещение Свято-Елизаветинского монастыря в Славске с парком птиц и замка Вальдау.

В экскурсию можно включить ещё и посещение пивоварни "Тильзит", где узнаете о традициях пивоварения  и продегустируете  несколько сортов пенного напитка.`,
    price: "от 16000 ₽ (10 часов)"
  },
  {
    title: "Янтарный + Светлогорск",
    images: Array(35).fill().map((_, i) => `image/yantarny${i+1}.jpg`),
    description: `Вы хотите увидеть все самое-самое на Янтарном побережье Балтийского моря за один день? Прогуляться по практически довоенным улочкам уютных приморских городков и узнать истории о «солнечном камне»? Тогда добро пожаловать на автопешеходный тур «Янтарный — Светлогорск (Балтийск)» в компании опытного гида. 

На экскурсии вы вдоволь налюбуетесь  Балтикой. К слову, на знаменитом пляже в Янтарном не просто для красоты развевается «голубой флаг» — символ комфорта и идеальной чистоты! 

Неспешно прогуляетесь по обширному парку Морица Беккера под удивительные рассказы о добыче «слез моря» в промышленных масштабах, увидите шлифовку янтаря и его волшебное превращение в изящные украшения и фигурки,  при желании нанесете визит в дом-музей скульптора Германа Брахерта. И конечно же, местная экзотика — захватывающий янтарный шоппинг! 

Юным туристам не придется скучать: для них предусмотрены интересные мастер-классы по обработке янтаря, квесты  или посещение парка Янтарного периода. 

По вашему желанию возможно отдельное посещение Янтарного, Светлогорска и Балтийска.

Поселок Янтарный (2 часа) 

Здесь сосредоточено 90 % мировых запасов янтаря, поэтому все местные достопримечательности так или иначе связаны с этим камнем: Янтарный комбинат, карьер, парк и усадьба Морица Беккера — янтарного промышленника,  озеро Янтарное и даже ресторан Янтарная легенда. 

Город Светлогорск (2 часа) 

Прогуляемся по уютным улочкам  самого медленного города в России и увидим немецкую архитектуру довоенного периода.  Светлогорск- это город парк, который весь утопает в зелени. Город, который также называют Балтийской Швейцарией.  Живописное озеро Тихое, Лиственничный парк, морской променад, пряничные домики, башня водогрязелечебницы, фуникулер и не только  это, вы увидите в нашей прогулке по Светлогорску.

В экскурсию можно добавить  и посещение самого западного города России - Балтийска (доплата 3000 р)

Дополнительные расходы Смотровая площадка янтарного карьера,  музей добычи янтаря., мастер классы по обработке янтаря, обед  на море.`,
    price: "от 12000 ₽ (6 часов)"
  },
  {
    title: "Инстербург + Георгенбург (Черняховск)",
    images: Array(16).fill().map((_, i) => `image/insterburg${i+1}.jpg`),
    description: `Погрузитесь в историю и окунитесь в мир лошадей в нашей экскурсии в Черняховск и на конезавод "Георгенбург"! 
Узнайте о славном прошлом
Инстербурга, основанного рыцарями Тевтонского ордена, прогуляйтесь по старинным улочкам и полюбуйтесь разнообразными архитектурными стилями.  

Вы увидите прекрасно сохранившиеся здания ХІХ века и узнаете их историю, а также о том, как они использовались во времена немецкого Инстербурга.
  
Я расскажу Вам об истории города, его архитекторах и особенностях планировки, а также об архитектурных стилях, характерных для старого Инстербурга.

Мы посетим действующий костел святого Бруно,  увидим бывшую ремесленную школу для девочек, старинные виллы и православный храм Архангела Михаила (бывшую кирху).

Одним из самых ярких символов города является старинная водонапорная башня в форме шахматной ладьи, которую вы обязательно увидите! Также мы посетим конезавод ' Георгенбург", где еще в 18  веке начали разводить тракененскую породу лошадей. Узнаем его историю, погладим и покормим лошадей.  `,
    price: "от 15000 ₽ (8 часов)"
  },
  {
    title: "По тропам Хомлинов",
    images: Array(7).fill().map((_, i) => `image/homlins${i+1}.jpg`),
    description: `В 2018 году в Калининграде  начала появляться славная семейка Хомлинов. Что это за персонажи и как они родились, вы и узнаете на нашем маршруте.  
    
    Эти забавные человечки в количестве  семи штук (Семья) разбросаны по основным достопримечательностям нашего города. 
    
    И в процессе их поисков мы узнаем и историю города и увидим его главные акценты. 
    
    Для маленьких  туристов экскурсию можно обыграть в виде квеста. 
    
    И завершим мы нашу прогулку в уютном Домике Хомлинов, где можно приобрести их в качестве  сувениров , а также полакомиться вкусным  десертом  с чашечкой  кофе или чая. 
    
    Время экскурсии около 3 х часов пролетает интересно и незаметно.`,
    price: "от 6000 ₽ (3 часа)"
  },
  {
    title: "Куршская коса + Зеленоградск",
    images: Array(28).fill().map((_, i) => `image/kurshskaya${i+1}.jpg`),
    description: `На узкой полосе суши между соленой Балтикой и пресноводным Куршским заливом расположился настоящий “туристический магнит” Калининградской области — уникальный нацпарк «Куршская коса», причем его угодья с севера граничат с Литовской Республикой. 

Аутентичности местным пейзажам придает тот факт, что весь национальный парк, по сути, представляет собой крупнейшую песчаную пересыпь на планете. 

Старейший из российских нацпарков протянулся почти на 100 км от Зеленоградска до литовской Клайпеды, при этом ширина заповедной территории не превышает 4 км — всё очень компактно, максимально живописно и неповторимо! 

Ценители необыкновенных природных панорам особенно отмечают здешние дюнные ландшафты, которые вкупе с вековыми древесными гигантами и богатейшей локальной фауной превращают просторы Куршской косы в знаковый объект для очень актуального в наши дни экотуризма. 
Скучать в таком природном оазисе не придется никому, тем более что для юных туристов подготовлены увлекательные загадки и мастер-классы. 

Обратная дорога пройдет через курортный Зеленоградск (бывший прусский Кранц), впечатляющий старинной архитектурой, неспешностью и атмосферой -  первый

Куршская коса (4-5 часа) 

Сегодня большая часть российской части косы — национальный парк. Начнём экскурсию  с Визит центра, где я познакомлю Вас с периодом образования Косы, ее заселением, почему она называется Куршская. Потом мы посетим Орнитологическую станцию, Танцующий Лес, Живописные дюны высоты Эфа. Можно пройти все маршруты, можно выбрать по желанию. 
И также можно искупаться и насладиться песчанными пляжами, и отведать свежий улов в аутентичных кафе.

•  Королевский бор: Встречает посетителей в начале косы, предлагая прогулку по живописному сосновому лесу с вековыми деревьями и богатым подлеском.

•  Визит-центр "Куршская коса": Информационный центр, где можно узнать об истории, природе и культуре косы, а также получить карту и рекомендации для дальнейшего путешествия.

•  Орнитологическая станция "Фрингилла": Место изучения миграции птиц, где можно увидеть процесс кольцевания и узнать интересные факты о пернатых обитателях косы.

•  Озеро Чайка и высота Мюллера: Маршрут ведет к живописному озеру, где обитают чайки, и к дюне Мюллера, откуда открывается прекрасный вид на окрестности.

•  Танцующий лес: Уникальный участок соснового леса с искривленными деревьями, причина аномалии до сих пор вызывает споры и привлекает туристов.

•  Высота Эфа: Одна из самых высоких дюн косы, откуда открывается захватывающий панорамный вид на море, залив и окружающие ландшафты.

•  Озеро Лебедь: Небольшое озеро, известное как место обитания лебедей, предлагающее спокойную и живописную атмосферу для наблюдения за птицами.

Зеленоградск (1 час) 

Пляжный курорт на побережье Балтийского моря, в 35 км от Калининграда. До 1946 года город принадлежал Пруссии и назывался Кранц. Ещё в начале XIX столетия немцы поняли, что морской воздух и вода полезны для здоровья, организовав здесь курорт.`,
    price: "от 15000 ₽ (8 часов)"
  },
  
  {
    title: "Все красоты области за 3 дня",
    images: Array(18).fill().map((_, i) => `image/3days${i+1}.jpg`),
    description: `Если у вас есть пара-тройка свободных дней в Калининграде, этот тур по выгодной цене идеально подойдет для знакомства с городом и курортами Янтарного побережья. 

1 день
В первый день проведу вас по знаковым локациям Калининграда. За 3-4 часа вы узнаете основные вехи становления Кёнигсберга и посетите его главные туристические места: башню Врангеля, Бранденбургские ворота, Драматический театр, Кафедральный собор, Кёнигсбергский замок, кирху королевы Луизы, Медовый мост, Музей янтаря, Остров Канта и Рыбную деревню.

2 день
Второй день проведем на Янтарном побережье. Нас ждут красоты Светлогорска и Янтарного (можно заменить визитом в Балтийск). Обязательно полюбуемся морем и посетим пляж, отмеченный за комфорт и идеальную чистоту Голубым флагом, восхитимся неповторимой архитектурой курортных городков, испытаем удачу в поисках янтаря и по желанию поучаствуем в мастер-классах по обработке солнечного камня!

3 день
В третий день побываем в Зеленоградске и увидим объект всемирного наследия ЮНЕСКО — Куршскую косу.
Тратить слова на описание этого природного шедевра бессмысленно, нужно просто посетить это волшебное место и узнать:

-как появилось это неповторимое чудо природы;
-почему гиганты-деревья в лесу пустились в пляс;
-кто спас косу от песчаной катастрофы;
-кто подарил имя Куршской косе;
-что такое «голубь Куршской косы» и с чем его едят?

После этого мы заедем в город кошек — Зеленоградск, посетим древний замок Шаакен и сыроварню.

По окончании 3-дневного тура по Калининграду и области у вас будет масса положительных эмоций, оригинальных фотографий, янтарных сувениров и рыбно-марципановых вкусняшек!

Город Калининград (4 часа) 

Обзорная экскурсия по Калининграду. Увидим башню Врангеля, Бранденбургские ворота, Драматический театр, Кафедральный собор, Кёнигсбергский замок, кирху королевы Луизы, Медовый мост, Музей янтаря, Остров Канта и Рыбную деревню.

Янтарное побережье (6 часов)

Побываем в Светлогорске и Янтарном (можно заменить/ добавить Балтийск).

Куршская коса (6 часов) 

Посетим Куршскую косу, место непередаваемой красоты и истории, заедем в город кошек — Зеленоградск, посетим древний замок Шаакен и сыроварню.`,
    price: "от 37000 ₽"
  },

  {
    title: "Гвардейск – Знаменск – Железнодорожный – Правдинск",
    images: Array(9).fill().map((_, i) => `image/gvardeisk${i+1}.JPG`),
    description: `Отправляйтесь в авторское путешествие по четырем жемчужинам Балтики! Экскурсия, которая могла бы носить имена "Тапиау — Велау — Гердауэн — Фридланд", проведет вас по старинным прусским городам: Гвардейску, Знаменску, Железнодорожному и Правдинску, где дух истории и архитектурное наследие прошлого оживают на каждом шагу.

Начнем наше погружение с Гвардейска, древнего Тапиау, основанного рыцарями Тевтонского ордена в XIII веке. Здесь, у мощных стен замка Тапиау, задаст настроение экскурсии мини-шоу часов на ратуше под звуки классической музыки. Неспешная прогулка по улочкам позволит ощутить неприступность замковых стен, а посещение интерактивной экскурсии или квеста в краснокирпичном Тапиау подарит незабываемые впечатления. Обязательно осмотрим старую площадь и миниатюрную кирху XVI века. Гвардейску есть чем удивить: это родина художника Ловиса Коринта, чей музей находится в его доме, а также место, где Александр Твардовский завершал работу над своей поэмой "Василий Теркин".

Далее нас ждет Знаменск, бывший Велау. Узнайте историю этого колоритного поселка по пути, а по прибытии посетите Кирху Святого Якоба, сад "Моя маленькая роза", действующий католический костел и отведайте блюда местной кухни на ферме Тюниных. Для любителей активного отдыха возможен сплав на байдарках.

В Железнодорожном, ранее Гердауэне, мы увидим руины замка, основанного в 1315 году, а также конюшни, здание мельницы, кирху 1345 года и отреставрированные домики поселка. Не упустите возможность посетить музей патефонов, где вы не только увидите, но и услышите музыку старинных экспонатов.

Путь между городами будет полон живописных пейзажей и интересных мест. Мы посетим внушительные шлюзы Мазурского канала, построенного в XVIII веке, чья 50-километровая протяженность привлекает любителей экстремального туризма.

Завершим наше путешествие в Правдинске, ранее Фридланде, "Мирной земле". Осмотрите кирху Святого Георга, самое высокое средневековое здание 1313 года, и полюбуйтесь местными пейзажами с ее башни. Здесь, на полях Фридланда, произошло знаменитое сражение 1807 года, и эта земля до сих пор хранит память тех лет.

Это познавательное и комфортное путешествие длительностью около 9 часов подарит вам незабываемые впечатления и откроет новые грани истории Балтийского края.`,
    price: "от 15000 ₽ (9 часов)"
  },

    {
    title: "Амалиенау",
    images: Array(17).fill().map((_, i) => `image/amalienay${i+1}.jpg`),
    description: `Откройте для себя очарование Амалиенау, "кенигсбергской Рублевки" начала XX века, в нашей пешеходной экскурсии! Погрузитесь в историю этого престижного района, где когда-то жили состоятельные горожане, и восхититесь архитектурным великолепием, разнообразием стилей и обилием зелени, превративших Амалиенау в настоящий "город-сад".

Прогуляйтесь по тихим улочкам и живописным скверам, любуясь элегантными виллами, принадлежавшими когда-то зажиточным кенигсбержцам, и услышьте увлекательные истории их жизни.

Наш маршрут приведет вас к самым красивым местам Амалиенау: парку "Луизенваль" с кирхой памяти Королевы Луизы, пруду Близнецов, а также позволит полюбоваться виллами Хонкамп, Лео, Шмидт, Рут, Винтер, Маковски и многими другими.

Амалиенау – это уникальная возможность прикоснуться к атмосфере прежнего Кенигсберга. Мы также заглянем к милым Хомлинам и, при желании, посетим музей немецкого быта "Альтес Хаус". А для полного погружения в эпоху можно запланировать визит в немецкую виллу, где хозяин поделится историей своей семьи переселенцев и угостит вас ароматным чаем с домашней шарлоткой.

Эта увлекательная прогулка займет около 2,5 часов и оставит незабываемые впечатления о "городе в городе" - Амалиенау.`,
    price: "от 6000 ₽ (2,5 часа)"
  }
];

  const modal = document.getElementById("tourModal");
  const modalTitle = document.getElementById("modal-title");
  const modalDescription = document.getElementById("modal-description");
  const carouselInner = document.getElementById("carousel-inner");
  const carouselIndicators = document.getElementById("carousel-indicators");
  const whatsappLink = document.getElementById("whatsapp-link");
  let currentSlide = 0, autoSlide;

  // ===== ОБРАБОТКА URL И ССЫЛОК =====
  // Функция для открытия модального окна по slug
  function openTourBySlug(slug) {
    const slugToIndex = {
      'kurshskaya-kosa-zelenogradsk': 0,
      'obzornaya-ekskursiya': 1,
      'vse-krasoty-za-3-dnya': 2
    };
    
    const index = slugToIndex[slug];
    if (index !== undefined) {
      showDetails(index);
    }
  }

  // === ОТКРЫТИЕ МОДАЛКИ ТУРА ===
  window.showDetails = (index) => {
    const tour = tours[index];
    
    // ОБНОВЛЯЕМ URL С ЧЕЛОВЕКО-ПОНЯТНЫМ ЯКОРЕМ
    const indexToSlug = {
      0: 'kurshskaya-kosa-zelenogradsk',
      1: 'obzornaya-ekskursiya', 
      2: 'vse-krasoty-za-3-dnya'
    };
    
    const slug = indexToSlug[index];
    if (slug) {
      history.pushState(null, null, `#${slug}`);
    }

    modalTitle.textContent = tour.title;
    whatsappLink.href = tour.whatsapp;
    modalDescription.innerHTML = "";

    tour.description.forEach(text => {
      const p = document.createElement("p");
      p.textContent = text;
      modalDescription.appendChild(p);
    });

    carouselInner.innerHTML = "";
    carouselIndicators.innerHTML = "";

    tour.images.forEach((src, i) => {
      const item = document.createElement("div");
      item.className = `carousel-item ${i === 0 ? "active" : ""}`;
      const img = document.createElement("img");
      img.src = src;
      img.alt = `Фото ${i + 1}`;
      img.onerror = function() { this.src = 'image/placeholder.jpg'; };
      item.appendChild(img);
      carouselInner.appendChild(item);

      const dot = document.createElement("span");
      dot.className = `dot ${i === 0 ? "active" : ""}`;
      dot.onclick = () => showSlide(i);
      carouselIndicators.appendChild(dot);
    });

    currentSlide = 0;
    modal.style.display = "flex";
    startAuto();
  };

  window.closeModal = () => {
    modal.style.display = "none";
    stopAuto();
    
    // ВОССТАНАВЛИВАЕМ ОРИГИНАЛЬНЫЙ URL БЕЗ ЯКОРЯ
    history.pushState(null, null, window.location.pathname);
  };

  // === СЛАЙДЕР ===
  function showSlide(index) {
    const items = document.querySelectorAll(".carousel-item");
    const dots = document.querySelectorAll(".dot");
    if (index >= items.length) index = 0;
    if (index < 0) index = items.length - 1;
    items.forEach((el, i) => el.classList.toggle("active", i === index));
    dots.forEach((d, i) => d.classList.toggle("active", i === index));
    currentSlide = index;
  }

  window.nextSlide = () => showSlide(currentSlide + 1);
  window.prevSlide = () => showSlide(currentSlide - 1);

  function startAuto() { autoSlide = setInterval(() => showSlide(currentSlide + 1), 4000); }
  function stopAuto() { clearInterval(autoSlide); }

  // === МОДАЛКА ОТЗЫВОВ ===
  window.openReviewModal = function(name, stars, date, text, imgSrc) {
    document.getElementById("modalReviewName").textContent = name;
    document.getElementById("modalReviewStars").textContent = stars;
    document.getElementById("modalReviewDate").textContent = date;
    document.getElementById("modalReviewText").textContent = text;

    if (imgSrc) {
      const img = document.getElementById("modalReviewImage");
      if (img) {
        img.src = imgSrc;
        img.style.display = "block";
      }
    }

    document.getElementById("reviewModal").style.display = "flex";
  };

  window.closeReviewModal = function() {
    document.getElementById("reviewModal").style.display = "none";
  };

  // === КЛИК ВНЕ МОДАЛК ===
  window.onclick = function(e) {
    if (e.target === modal) closeModal();
    if (e.target === document.getElementById("reviewModal")) closeReviewModal();
  };

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      if (modal.style.display === "flex") closeModal();
      if (document.getElementById("reviewModal").style.display === "flex") closeReviewModal();
    }
  });

  // === АНИМАЦИЯ "ПОЧЕМУ ВЫБИРАЮТ НАС" ===
  const items = document.querySelectorAll(".why-us li");
  const obs = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) entry.target.classList.add("show");
    });
  }, { threshold: 0.2 });
  items.forEach(i => obs.observe(i));

  // === ОБРАБОТКА ЗАГРУЗКИ СТРАНИЦЫ С ЯКОРЕМ ===
  const hash = window.location.hash;
  if (hash) {
    const slug = hash.replace('#', '');
    openTourBySlug(slug);
  }

  // === ОБРАБОТКА ИЗМЕНЕНИЯ URL ===
  window.addEventListener('hashchange', function() {
    const hash = window.location.hash;
    if (!hash) {
      closeModal();
    } else {
      const slug = hash.replace('#', '');
      openTourBySlug(slug);
    }
  });
});

// === БУРГЕР ===
function toggleMenu() {
  document.getElementById("navMenu").classList.toggle("show");
}

